#
# Makefile for the common code library project. 
# This probably requires GNU make.
#

CFLAGS = __WFLAGS__ __DEBUG__ __CHAR__ __PROFILE__ __OPTIMIZE__ __CHECK_FLAG__ __DEFS__ -D__OSTYPE__ 
INC    = __INCLUDE__
CC     = __CC__
AR     = __AR__
RANLIB = __RANLIB__

OBJS = crypt_random.o debug.o mbus.o md5.o memory.o net_udp.o qfDES.o \
       util.o hmac.o base64.o rtp.o

SRCS := $(OBJS:%.o=%.c)

libcommon.a: $(OBJS)
	$(AR) r libcommon.a $(OBJS)
	$(RANLIB) libcommon.a

.c.o:
	$(CC) $(CFLAGS) $(INC) -c $<

clean:
	-rm -f $(OBJS) version.h Makefile libcommon.a tags

etags:
	etags *.[ch]

ctags:
	ctags *.[ch]

release:
	cvs tag release-`cat VERSION | sed "s/\./-/g"`

depend: $(SRCS)
	makedepend $(INC) $(SRCS)
